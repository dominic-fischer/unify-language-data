SYSTEM PROMPT:
You are an expert in the portuguese language. You excel at inspecting linguistic data from different sources and distilling them into a specific format.

USER PROMPT:
You are a linguist tasked with normalizing grammatical descriptions for the language portuguese.

The data you receive comes from multiple sources and relates to the following topics:
imperative, mood, verb.

Your goal is to transform the data into a structure that EXACTLY matches the reference schema provided.

REFERENCE SCHEMA (structure and headings must be followed exactly):
{
  "$schema": "http://json-schema.org/draft/2020-12/schema",
  "title": "Grammar File Schema",
  "type": "object",

  "$defs": {
    "endings": {
      "type": "object",
      "properties": {
        "features": { "type": "object" },
        "form": { "type": "string" },
        "note": { "type": "string" }
      },
      "required": ["features", "form"]
    },
    "forms": {
      "type": "object",
      "properties": {
        "features": { "type": "object" },
        "form": { "type": "string" },
        "pattern": { "type": "string" },
        "note": { "type": "string" }
      },
      "required": ["features"],
      "oneOf": [
        { "required": ["form"] },
        { "required": ["pattern"] }
      ]
    },
    "applies": {
      "type": "object",
      "description": "Feature-value constraints for the rule/usage"
    },
    "examples": {
      "type": "array",
      "items": { "type": "string" },
      "minItems": 1
    },
    "patterns": {
      "type": "object",
      "properties": {
        "pattern": { "type": "string" },
        "examples": { "$ref": "#/$defs/examples" },
        "note": { "$ref": "#/$defs/note" },
        "endings": {
          "type": "array",
          "items": { "$ref": "#/$defs/endings" }
        },
        "forms": {
          "type": "array",
          "items": { "$ref": "#/$defs/forms" }
        }
      },
      "oneOf": [
        { "required": ["pattern"] },
        { "required": ["forms"] }
      ]
    },
    "note": {
      "type": "string"
    }
  },

  "patternProperties": {
    "^[A-Z][A-Za-z0-9-]*$": {
      "type": "object",
      "required": ["Features", "Rules"],
      "properties": {
        "Features": {
          "type": "object",
          "additionalProperties": {
            "type": "array",
            "items": { "type": "string" }
          }
        },
        "Usage": {
          "type": "object",
          "additionalProperties": {
            "type": "object",
            "properties": {
              "applies": { "$ref": "#/$defs/applies" },
              "note": { "$ref": "#/$defs/note" },
              "examples": { "$ref": "#/$defs/examples" }
            },
            "anyOf": [
              { "required": ["applies"] },
              { "required": ["note"] },
              { "required": ["examples"] }
            ]
          }
        },
        "Negation": {
          "type": "object",
          "required": ["examples"],
          "properties": {
            "pattern": { "type": "string" },
            "examples": { "$ref": "#/$defs/examples" },
            "note": { "$ref": "#/$defs/note" }
          }
        },
        "Rules": {
          "type": "object",
          "additionalProperties": {
            "type": "object",
            "required": ["applies"],
            "properties": {
              "applies": { "$ref": "#/$defs/applies" },
              "pattern": { "type": "string" },
              "patterns": {
                "type": "array",
                "items": { "$ref": "#/$defs/patterns" }
              },
              "endings": {
                "type": "array",
                "items": { "$ref": "#/$defs/endings" }
              },
              "forms": {
                "type": "array",
                "items": { "$ref": "#/$defs/forms" }
              },
              "examples": { "$ref": "#/$defs/examples" },
              "note": { "$ref": "#/$defs/note" },
              "negation": { "type": "string" }
            },
            "anyOf": [
              { "required": ["pattern"], "not": { "required": ["patterns"] } },
              { "required": ["patterns"], "not": { "anyOf": [ { "required": ["pattern"] }, { "required": ["forms"] } ] } },
              { "required": ["forms"], "not": { "required": ["patterns"] } }
            ]
          }
        },
        "Notes": {
          "type": "array",
          "items": { "type": "string" }
        }
      }
    }
  },

  "additionalProperties": false
}

INSTRUCTIONS:
- Use ONLY the information present in the provided data.
- Rephrase content where necessary, but do NOT add new facts.
- Merge overlapping information into a single coherent description.
- Ignore information that is not relevant to the reference schema.
- Preserve the hierarchy and ordering of the reference schema.

FEATURES AND THEIR VALUES:
- Feature names and values are prefixed with either u-, x- or pt-.
- Use the prefix "u-" for UniMorph features and values.
- Use the prefix "x-" for custom (non-UniMorph, cross-linguistic) features and values.
- Use the language prefix "portuguese-" ONLY for language-specific features and values.
- When multiple representations are possible, prefer:
  1) UniMorph ("u-") features,
  2) then custom ("x-") features,
  3) and only then language-specific ("portuguese-") features.
- Do NOT invent new features if an appropriate UniMorph feature exists.

SOURCE DATA:
Source 1:
Grammarians usually classify the verbal inflections (i.e. the synthetic verb forms) into the following moods, tenses, and non-finite forms:

indicative mood, used in the main clauses of declarative sentences:
present tense: cantamos, "we sing"
past tenses:
preterite: cantámos (EP), cantamos (BP) "we sang"
imperfect: cantávamos, "we were singing"
pluperfect: cantáramos, "we had sung"
future tense: cantaremos, "we will sing"
conditional mood:
conditional tense: cantaríamos, "we would sing"
subjunctive mood used in certain subordinate clauses:
present subjunctive: que cantemos, "that we sing"
preterite subjunctive: se cantássemos, "if we sang"
future subjunctive: se cantarmos, "if we sing/should we sing"
imperative mood: used to express a command, advice, encouragement, etc.:
positive: canta! "sing!"
negative: não cantes! "don't sing!"
verbals
infinitives:
impersonal: cantar, "to sing"
personal: cantarmos, "for us to sing", "that we sing" or "our singing"
participles:
present participle: cantando "singing"
past (or passive) participle: cantado "sung"
The conditional tense is usually called "future of the past" in Brazilian grammars, whereas in Portugal it is usually classified as a separate "conditional mood". Portuguese grammarians call subjunctive "conjuntivo"; Brazilians call it "subjuntivo".
Note that the synthetic future and conditional have largely disappeared from everyday speech.  The synthetic future is generally replaced by ir + infinitive (e.g. vou cantar "I will sing"), while the conditional is replaced either by the imperfect (especially in its modal use; se você me desse dinheiro, eu cantava "if you gave me money, I would sing") or by the imperfect of ir + infinitive (in its non-modal, "future of the past" usage; ele disse que ia cantar "he said that he would sing").  However, the synthetic future subjunctive is still in common use (e.g. se você for "if you should go").  The synthetic future and conditional of verbs with one-syllable infinitives also sometimes occur (e.g. será/seria "it will/would be" or in the compound tenses terá/teria sido "it will/would have been").
In regular verbs, the personal infinitive is identical to the subjunctive future tense; but they are different in irregular verbs: quando formos ("when we go", subjunctive) versus é melhor irmos ("it is better that we go").
There are also many compound tenses expressed with inflected forms of the auxiliary verbs ser and estar (variants of "to be"), haver and ter (variants of "to have").

The Portuguese subjunctive mood is used mainly in certain kinds of subordinate clauses. There are three synthetic subjunctive inflections, conventionally called "present", "past" and "future". The rules of usage, in broad terms, are the following:

The present subjunctive is used in clauses, often introduced with que ("that"), which express generally non-assertive notions, such as wishes, orders, possibilities, etc.:
quero que cante, "I want her/him to sing"
supondo que cante, "assuming that he/she will sing"
ele será pago, cante ou não, "he will be paid, whether he sings or not"
The past subjunctive is used for adverbial subordinate clauses, introduced with se ("if") or equivalent, that are conditions for a main cause in the conditional tense.
se cantasse, seria famoso ("if he/she sang [if he/she were a singer], he/she would be famous")
se cantasse, teríamos aplaudido ("if he/she had sung, we would have applauded")
It is also used for noun clauses, introduced with que, that are the object of past wishes or commands:

esperávamos que cantasse ("we hoped that he would sing")
eu mandei que cantassem ("I ordered them to sing")
The future subjunctive is an uncommon feature among Indo-European languages. It is used in adverbial subordinate clauses, usually introduced by se ("if") or quando ("when"), or in adjectival subordinate clauses that express a neutral or expected condition for a present- or future-tense main clause:
se cantarmos, seremos pagos ("If we (should) sing, we will be paid")
se cantarmos, ele fica ("If we (should) sing, he stays")
quando cantarmos, ele escutará ("When we (should) sing, he will listen")
Often, the option between indicative and subjunctive depends on whether the speaker does or does not endorse the proposition expressed by the subordinate clause:
Admito que ele roubou a bicicleta. ("I admit that he stole the bicycle.")
Admito que ele possa ter roubado a bicicleta. ("I admit that he could have stolen the bicycle.")
In relative clauses, the option between indicative and subjunctive depends on whether the speaker does or does not identify a single object with the property expressed by the relative clause:
Ando à procura de um cão que fala! ("I'm looking for a certain dog which can speak!")
Ando à procura de um cão que fale! ("I'm looking for any dog that speaks!")
More on the subjunctive mood in Portuguese can be found at Wikibooks: Variation of the Portuguese Verbs.

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 



EXAMPLE OUTPUT (for German):
Imperative:
  Features:
    u-Person: [u-1, u-2, u-3]
    u-Number: [u-sg, u-pl]

  Negation:
    applies: {x-Negation-type: x-clause}
    note: "Regular negation."
    examples: 
    - "Geh doch nicht dahin!"

  Rules:
    u-Number_u-sg__u-Person_u-2:
      applies: {u-Number: u-sg, u-Person: u-2}
      pattern: "_stem_ + (optionally -e)"
      examples: 
      - "geh!"
      - "mache!"
      note: "direct imperative singular; -e ending optional in 2sg, often dropped in colloquial usage"

    u-Number_u-pl__u-Person_u-1:
      applies: {u-Number: u-pl, u-Person: u-1}
      pattern: "_stem_ + en + wir"
      examples: 
      - "gehen wir!"
      note: "inclusive 'let's…' construction"

    u-Number_u-pl__u-Person_u-2:
      applies: {u-Number: u-pl, u-Person: u-2}
      pattern: "_stem_ + t"
      examples: 
      - "geht!"
      - "macht!"
      note: "direct imperative plural"

    u-Number_u-pl__u-Person_u-3:
      applies: {u-Number: u-pl, u-Person: u-3}
      pattern: "infinitive + Sie!"
      examples: 
      - "gehen Sie!"
      note: "polite form, direct imperative singular"


OUTPUT RULES:
- Output ONLY the synthesized schema.
- Do NOT include explanations, comments, or metadata.
- Use the same formatting style as the example.

